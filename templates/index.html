<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Tracker</title>
    <script>
        async function fetchPlayers() {
            const response = await fetch('/players');
            const players = await response.json();
            document.getElementById("players").innerText = JSON.stringify(players, null, 2);
        }

        async function fetchMatches() {
            const response = await fetch('/matches');
            const matches = await response.json();
            document.getElementById("matches").innerText = JSON.stringify(matches, null, 2);
        }

        async function startNewGame() {
            const people = document.getElementById("players_input").value.split(",");
            const decks = document.getElementById("decks_input").value.split(",");
            const winner = document.getElementById("winner_input").value;

            const response = await fetch('/new_game', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ people, decks, winner })
            });

            const data = await response.json();
            alert(data.message);
            fetchMatches();
            fetchPlayers();
        }
    </script>
</head>
<body>
    <h1>Match Tracker</h1>
    
    <h2>Enter Match</h2>
    <label>Players (comma-separated):</label>
    <input type="text" id="players_input"><br>
    
    <label>Decks (comma-separated):</label>
    <input type="text" id="decks_input"><br>
    
    <label>Winner:</label>
    <input type="text" id="winner_input"><br>
    
    <button onclick="startNewGame()">Start Game</button>
    
    <h2>Players</h2>
    <button onclick="fetchPlayers()">Load Players</button>
    <pre id="players"></pre>
    
    <h2>Matches</h2>
    <button onclick="fetchMatches()">Load Matches</button>
    <pre id="matches"></pre>
</body>
</html>
